# 各ディレクトリの役割

## background
- 常駐的に、またはイベントによって動くスクリプトを書くところ。
- 拡張機能でアクセス可能なブラウザの機能をフルで使うことができる。

## content_script
- アクセスしたページの DOM にアクセスして、UI を変えたりできる。

# やりたいこと
## 概要
gitlab の Issue 詳細画面からトラッキングの操作をする

## 仕様
- gitrack のアイコンをクリックすると Popup が開く
  - ✅トラッキングスタートボタンの配置
  - ✅clockify token をオプションから入れられるようにする
  - ✅gitlab の issue 詳細かどうかを、タブを監視して URL のパターンから判定する
  - タスク名初期値は #{Issue 番号} {Issue 名} の形式でインプットに表示する
  - リポジトリ名と一致するプロジェクトがある場合はそれを表示する
  - 無い場合は新規であることが分かるような表示にする
  - 既に計測中であれば時間を表示する（ちょいむずいかも）
  - 過去に計測したデータがあればそのタスクと合計時間を表示する。
- clokify のページに遷移する

# 技術的に実現したいこと
- ✅background で起動時に options で保存した token を使って API を叩く
- ✅sendMessage を使って任意のタイミングでリロードする
- ✅レスポンスを local に保存する
- Popup から local のデータを取得して画面に表示する
- Popup からリロードする
- URL から リポジトリ名と Issue 番号を取得し、popup 上に表示する
  - backend に問い合わせ必要？ → いずれにせよ詳細は必要なのでバックエンド経由で良い
- gitlab の issue 詳細を開いたときに自動で Popup が表示される

# 次にやること
- Issue 名を取得する
- 推測した IssueID とリポジトリ名 と Issue 名でタイムトラッキングをスタートする

